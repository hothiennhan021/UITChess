<Window x:Class="ChessUI.LeaderboardWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Leaderboard"
        Height="560" Width="820"
        WindowStartupLocation="CenterScreen"
        Background="#0B1220"
        Foreground="White">

    <Window.Resources>

        <!-- Card style -->
        <Style TargetType="Border" x:Key="CardBorder">
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Background" Value="#141F33"/>
            <Setter Property="Padding" Value="14"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
        </Style>

        <!-- Rounded button -->
        <Style TargetType="Button" x:Key="RoundButton">
            <Setter Property="Background" Value="#2D6BFF"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="14,8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bd" Background="{TemplateBinding Background}" CornerRadius="12">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bd" Property="Opacity" Value="0.92"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="bd" Property="Opacity" Value="0.80"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="bd" Property="Opacity" Value="0.45"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Search box -->
        <Style TargetType="TextBox" x:Key="SearchBox">
            <Setter Property="Background" Value="#10192B"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#263758"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border CornerRadius="12"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ScrollViewer x:Name="PART_ContentHost"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Remove ListView default white background + ugly selection -->
        <Style TargetType="ScrollViewer">
            <Setter Property="Background" Value="Transparent"/>
        </Style>

        <Style TargetType="ListView">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="0"/>
        </Style>

        <Style TargetType="ListViewItem">
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListViewItem">
                        <ContentPresenter/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>

    <Grid Margin="18">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Grid Grid.Row="0" Margin="0,0,0,14">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel>
                <TextBlock Text="Elo Leaderboard" FontSize="24" FontWeight="SemiBold"/>
                <TextBlock Text="Top players by Elo" Opacity="0.7" Margin="0,4,0,0"/>
            </StackPanel>

            <Button Grid.Column="1"
                    Style="{StaticResource RoundButton}"
                    Content="Refresh"
                    Click="BtnRefresh_Click"/>
        </Grid>

        <!-- Search row -->
        <Grid Grid.Row="1" Margin="0,0,0,12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBox Grid.Column="0"
                     Style="{StaticResource SearchBox}"
                     Width="360"
                     HorizontalAlignment="Left"
                     Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                     ToolTip="Search player name"/>

            <TextBlock Grid.Column="1"
                       Margin="12,0,0,0"
                       VerticalAlignment="Center"
                       Opacity="0.7"
                       Text="{Binding CountText}"/>
        </Grid>

        <!-- List Area (NO WHITE BOX) -->
        <Border Grid.Row="2"
                CornerRadius="18"
                Background="#0F172A"
                Padding="10">

            <ScrollViewer Background="Transparent"
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled">

                <ListView ItemsSource="{Binding RowsView}"
                          Background="Transparent"
                          BorderThickness="0">

                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Border Style="{StaticResource CardBorder}"
                                    Cursor="Hand"
                                    MouseLeftButtonUp="Row_Click">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="62"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <!-- Rank badge -->
                                    <Border Width="46" Height="46"
                                            CornerRadius="14"
                                            Background="#0F2A5A"
                                            VerticalAlignment="Center">
                                        <TextBlock Text="{Binding Rank}"
                                                   Foreground="White"
                                                   FontWeight="Bold"
                                                   FontSize="16"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"/>
                                    </Border>

                                    <!-- Name + stats -->
                                    <StackPanel Grid.Column="1" Margin="12,0,0,0" VerticalAlignment="Center">
                                        <TextBlock Text="{Binding Username}"
                                                   Foreground="White"
                                                   FontSize="18"
                                                   FontWeight="SemiBold"/>

                                        <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                                            <!-- Matches -->
                                            <Border Background="#1A2F55" CornerRadius="999" Padding="10,6" Margin="0,0,8,0">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="Matches: " Foreground="White" Opacity="0.75" FontSize="12"/>
                                                    <TextBlock Text="{Binding Matches, Mode=OneWay}" Foreground="White" FontWeight="SemiBold" FontSize="12"/>
                                                </StackPanel>
                                            </Border>


                                            <!-- Win rate -->
                                            <Border Background="#1A2F55" CornerRadius="999" Padding="10,6" Margin="0,0,8,0">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="Win: " Foreground="White" Opacity="0.75" FontSize="12"/>
                                                    <TextBlock Text="{Binding WinRateText, Mode=OneWay}" Foreground="White" FontWeight="SemiBold" FontSize="12"/>
                                                </StackPanel>
                                            </Border>


                                            <!-- W-L -->
                                            <Border Background="#1A2F55" CornerRadius="999" Padding="10,6">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="W-L: " Foreground="White" Opacity="0.75" FontSize="12"/>
                                                    <TextBlock Text="{Binding Wins}" Foreground="White" FontWeight="SemiBold" FontSize="12"/>
                                                    <TextBlock Text="-" Foreground="White" Opacity="0.85" FontSize="12"/>
                                                    <TextBlock Text="{Binding Losses}" Foreground="White" FontWeight="SemiBold" FontSize="12"/>
                                                </StackPanel>
                                            </Border>

                                        </StackPanel>
                                    </StackPanel>


                                    <!-- Elo pill -->
                                    <Border Grid.Column="2"
                                            Background="#2A4A7A"
                                            CornerRadius="999"
                                            Padding="12,8"
                                            VerticalAlignment="Center">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Elo " Foreground="White" Opacity="0.75"/>
                                            <TextBlock Text="{Binding Elo}" Foreground="White" FontWeight="Bold" FontSize="13"/>
                                        </StackPanel>
                                    </Border>

                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ListView.ItemTemplate>

                </ListView>
            </ScrollViewer>
        </Border>

    </Grid>
</Window>
